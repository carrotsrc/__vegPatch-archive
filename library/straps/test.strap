<echo>
vegPatch Strap Test
-------------------
</echo>
<!-- Test table creation -->
<table name="vpatch_test">
	<column name="id" type="int(5)" extra="AUTO_INCREMENT" />
	<column name="fname" type="varchar(32)" extra="NOT NULL" />
	<column name="lname" type="varchar(32)" extra="NOT NULL" />
	<column name="status" type="text" />
	<primary name="id" />
	<index name="names">
		<column name="lname" />
		<column name="fname" />
	</index>
</table>


<!-- Test resource management -->
<rbase name="basex" />
<rtype name="TypeX" base="basex" />
<edge name="edgex" type="TypeX" />

<resource name="rpx" type="TypeX" label="RParentX" ref="1" rout="ridp" />
<resource name="rcx" type="TypeX" label="RChildX" ref="2" rout="ridc" />

<relationship parent="{ridp}" child="{ridc}" edge="edgex" />


<!-- Test module registration -->
<obj name="modreg" space="vpatch">
	<module type="component" name="vp_helloworld" space="vpatch" out="cref" rout="crid" />
	<module type="panel" name="vp_helloworld_ui" space="vpatch" />
	<module type="plugin" name="hw_plugin" rout="ridplug" out="pluginref" />
	<instance label="hwc_1" id="{cref}" out="iref"></instance>
</obj>

<resource type="Instance" label="hwplg_1" ref="1" rout="ridi" />
<relationship parent="{ridplug}" child="{ridi}" />

<resource type="Instance" label="hwplg_2" ref="2" rout="ridi" />
<relationship parent="{ridplug}" child="{ridi}" />


<!-- Test channel configuration -->
<obj name="channel" space="vpatch">
	<channel name="test_chan">
		<plugin id="{pluginref}" ref="1" />
		<plugin id="{pluginref}" ref="2" />
	</channel>
</obj>

<!-- Test area configuration -->
<obj name="areacfg" space="vpatch">
	<area name="hello_area" surround="4" template="2" rout="rida"/>
</obj>

<!-- Test wireframe and layout configuration -->
<obj name="wireframecfg" space="vpatch">
	<layout name="test_layout" rout="ridl">

<node>
	<static>This is some static</static>
</node>
<node>
	<leaf pid="vp_helloworld_ui" cid="{cref}" ref="{iref}" grp="0" />
</node>

	</layout>
</obj>

<!-- Set the layout as index of hello_area -->
<relationship parent="{rida}" child="{ridl}" edge="index" />

<!-- Test database insert -->
<obj name="db" space="vpatch">
	<insert table="vpatch_test">
		<col name="fname" value="forest" />
		<col name="lname" value="elf" />
		<col name="status" value="casting scorn scorn of woodland" />
	</insert>
</obj>
